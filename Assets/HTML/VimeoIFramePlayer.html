<!DOCTYPE HTML>
<html>
    <head>
        <style type="text/css">
            body { background: black; }
            body, div { width: 100%%; height: 100%%; margin: 0; padding: 0; border: 0; }
            #player { border: 0; }
            </style>
    </head>
    <body>
        <script>
            var Froogaloop=function(){function e(a){return new e.fn.init(a)}function h(a,c,b){if(!b.contentWindow.postMessage)return!1;var f=b.getAttribute("src").split("?")[0],a=JSON.stringify({method:a,value:c});"//"===f.substr(0,2)&&(f=window.location.protocol+f);b.contentWindow.postMessage(a,f)}function j(a){var c,b;try{c=JSON.parse(a.data),b=c.event||c.method}catch(f){}"ready"==b&&!i&&(i=!0);if(a.origin!=k)return!1;var a=c.value,e=c.data,g=""===g?null:c.player_id;c=g?d[g][b]:d[b];b=[];if(!c)return!1;void 0!==
                a&&b.push(a);e&&b.push(e);g&&b.push(g);return 0<b.length?c.apply(null,b):c.call()}function l(a,c,b){b?(d[b]||(d[b]={}),d[b][a]=c):d[a]=c}var d={},i=!1,k="";e.fn=e.prototype={element:null,init:function(a){"string"===typeof a&&(a=document.getElementById(a));this.element=a;a=this.element.getAttribute("src");"//"===a.substr(0,2)&&(a=window.location.protocol+a);for(var a=a.split("/"),c="",b=0,f=a.length;b<f;b++){if(3>b)c+=a[b];else break;2>b&&(c+="/")}k=c;return this},api:function(a,c){if(!this.element||!1;break a}d[a]=null}b=!0}"ready"!=a&&b&&h("removeEventListener",a,c)}};e.fn.init.prototype=e.fn;window.addEventListener?window.addEventListener("message",j,!1):window.attachEvent("onmessage",j);return window.Froogaloop=window.$f=e}();
        </script>
        <iframe id="player" src="" width="%d" height="%d" frameborder="0" webkitAllowFullScreen allowFullScreen></iframe>
        <script>
            iframe = document.getElementById("player"),
            player = $f(iframe);
            
            player.addEvent('ready', function ()
                            {
                            log("ready");
                            onEvent("ready", null);
                            
                            player.addEvent('loadProgress', function () { onLoadProgress(); });
                            player.addEvent('playProgress', function () { onPlayProgress); });
            player.addEvent('play', function () { onPlay(); });
            player.addEvent('pause', function () { onPause(); });
            player.addEvent('finish', function () { onFinish(); });
            player.addEvent('seek', function () { onSeek() });
            });
            
            // All possible event functions
            function onLoadProgress(event)
            {
                log("loadProgress");
                onEvent("playProgress", event.data);
            }
            
            function onPlayProgress(event)
            {
                log("playProgress");
                onEvent("playProgress", event.data);
            }
            
            function onPlay(event)
            {
                log("play");
                onEvent("stateChange", "playing");
            }
            
            function onPause(event)
            {
                log("pause");
                onEvent("stateChange", "paused");
            }
            
            function onFinish(event)
            {
                log("finish");
                onEvent("stateChange", "ended");
            }
            
            function onSeek(event)
            {
                log("seek");
                onEvent("seek", event.data);
            }
            
            // Report the event back to the UIWebViewer (by using the URL change trick)
            function onEvent(eventName, eventData)
            {
                // Contruct a new URL with the
                var url = "ytplayer://event/" + eventName;
                
                if (eventData != null)
                {
                    url += ("/" + eventData);
                }
                
                // Now pass this back to the UIWebView
                execute(url);
            }
            
            // We need to do this so that events don't get lost when following in quick succession
            function execute(url)
            {
                var iframe = document.createElement("IFRAME");
                iframe.setAttribute("src", url);
                document.documentElement.appendChild(iframe);
                iframe.parentNode.removeChild(iframe);
                iframe = null;
            }
            
            // If this returns true, then we haven't navigated away from this page
            function checkPlayerAvailability ()
            {
                return true;
            }
            
            // We use this to force a reload of the vimeo video
            function loadVideoById(id)
            {
                iframe.src = 'http://player.vimeo.com/video/' + id + '?api=1&player_id=player';
            }
            </script>
    </body>
</html>